(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cdd383f8"],{"159b":function(e,t,s){var r=s("da84"),n=s("fdbc"),i=s("17c2"),a=s("9112");for(var l in n){var o=r[l],c=o&&o.prototype;if(c&&c.forEach!==i)try{a(c,"forEach",i)}catch(u){c.forEach=i}}},"17c2":function(e,t,s){"use strict";var r=s("b727").forEach,n=s("a640"),i=s("ae40"),a=n("forEach"),l=i("forEach");e.exports=a&&l?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"1dde":function(e,t,s){var r=s("d039"),n=s("b622"),i=s("2d00"),a=n("species");e.exports=function(e){return i>=51||!r((function(){var t=[],s=t.constructor={};return s[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},4160:function(e,t,s){"use strict";var r=s("23e7"),n=s("17c2");r({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"41ea":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",[e._v("病例录入")])],1),s("el-card",[s("el-form",{ref:"illnessInfoRef",attrs:{model:e.illnessInfo,"label-width":"80px"}},[s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"register-id",attrs:{label:"挂号单:"}},[s("el-tag",[e._v(e._s(e.currentUser.registerId))])],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"user-name",attrs:{label:"患者姓名:"}},[s("el-tag",[e._v(e._s(e.currentUser.userName))])],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{staticClass:"staff-name",attrs:{label:"主治医生:"}},[s("el-tag",[e._v(e._s(e.currentUser.staffName))])],1)],1)],1),s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:"病症详情"}},[s("el-input",{staticClass:"form-textarea",attrs:{type:"textarea",disabled:e.flag,autosize:{minRows:5,maxRows:50},placeholder:"请输入内容"},model:{value:e.userIllnessInfo.userIllness,callback:function(t){e.$set(e.userIllnessInfo,"userIllness",t)},expression:"userIllnessInfo.userIllness"}})],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"药物名称"}},[s("el-select",{attrs:{clearable:"",disabled:e.flag,placeholder:"请选择药物"},model:{value:e.illnessInfo.selectedMedicId,callback:function(t){e.$set(e.illnessInfo,"selectedMedicId",t)},expression:"illnessInfo.selectedMedicId"}},e._l(e.illnessInfo.medicMenus,(function(e){return s("el-option",{key:e.medicId,attrs:{label:e.medicName,value:e.medicId}})})),1)],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"数量"}},[s("el-input-number",{attrs:{disabled:e.flag,min:1,max:50},model:{value:e.illnessInfo.currentNum,callback:function(t){e.$set(e.illnessInfo,"currentNum",t)},expression:"illnessInfo.currentNum"}})],1)],1),s("el-col",{attrs:{span:4}},[s("el-button",{staticClass:"add-medic",attrs:{disabled:e.flag,type:"primary"},on:{click:e.addMedic}},[e._v("添加")])],1),s("el-col",{attrs:{span:4}},[s("el-tag",{staticClass:"total-price"},[e._v("总价: "+e._s(this.totalPrice))])],1)],1),s("el-row",[s("el-col",[s("el-form-item",{attrs:{label:"药品名单"}},[s("el-table",{attrs:{data:e.userIllnessInfo.medicList,border:""}},[s("el-table-column",{attrs:{prop:"medicName",label:"药物名称"}}),s("el-table-column",{attrs:{prop:"medicNum",label:"数量"}}),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"danger"},on:{click:function(s){return e.deleteByIndex(t.$index)}}},[e._v("删除")])]}}])})],1)],1)],1)],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6,offset:6}},[s("el-button",{attrs:{disabled:e.flag,type:"primary"},on:{click:e.submitCase}},[e._v("提交")])],1),s("el-col",{attrs:{span:6,offset:3}},[s("el-button",{attrs:{type:"info",disabled:e.flag}},[e._v("取消")])],1)],1)],1)],1)],1)},n=[],i=(s("7db0"),s("4160"),s("a434"),s("159b"),s("1bab")),a={name:"Case",data:function(){return{illnessInfo:{selectedMedicId:"",currentNum:1,medicMenus:[{medicId:1,medicName:"阿莫西林",medicPrice:12},{medicId:2,medicName:"六味地黄丸",medicPrice:12},{medicId:3,medicName:"999感冒灵",medicPrice:12},{medicId:4,medicName:"双黄连口服液",medicPrice:12},{medicId:5,medicName:"白加黑",medicPrice:12},{medicId:6,medicName:"消炎药",medicPrice:12}]},flag:!1,treatmentQueueInfoList:[],currentUser:{registerId:"",userId:"",userName:"",staffId:"",staffName:""},userIllnessInfo:{registerId:"",userId:"",userIllness:"",staffId:"",medicList:[],totalPrice:0}}},activated:function(){var e=this;console.log("case active"),Object(i["a"])({url:"/home/case/treatmentQueueInfoListInit",method:"post",data:{staffId:this.$store.state.staffId}}).then((function(t){var s=t.data;console.log(t),200===s.status?(e.treatmentQueueInfoList=s.result.data,e.currentUser=e.treatmentQueueInfoList.shift(),e.$message({type:"success",message:"就诊列表初始化查询成功!"})):e.$message({type:"error",message:"就诊列表初始化查询失败!"})})).catch((function(t){console.log(t),e.$message({type:"error",message:"因网络波动,操作失败!"})}))},methods:{addMedic:function(){var e=this,t=this.illnessInfo.medicMenus.find((function(t){return t.medicId===e.illnessInfo.selectedMedicId}));"undefined"!==typeof t?(t.medicNum=this.illnessInfo.currentNum,this.userIllnessInfo.medicList.unshift(t),this.illnessInfo.currentNum=1,console.log(this.userIllnessInfo.medicList)):this.$message.error("请先选择药物!")},deleteByIndex:function(e){var t=this;console.log(e);var s=this;this.$confirm("是否删除该药物?","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((function(){s.userIllnessInfo.medicList.splice(e,1),t.$message({type:"success",message:"删除成功!"})})).catch((function(){t.$message({type:"info",message:"已取消!"})}))},submitCase:function(){var e=this;this.getFormMessage();var t=JSON.stringify(this.userIllnessInfo);console.log(t),Object(i["a"])({url:"/home/case/insertCaseInfo",method:"post",data:{caseData:t}}).then((function(t){var s=t.data;console.log(s),200===s.status?(e.$message({type:"success",message:"病例信息更新成功!"}),e.getNextUser()):e.$message({type:"success",message:"病例信息更新失败!"})})).catch((function(t){console.log(t),e.$message({type:"error",message:"因网络波动,操作失败!"})}))},getNextUser:function(){if(this.userIllnessInfo.userIllness="",this.illnessInfo.totalPrice=0,this.userIllnessInfo.medicList=[],this.illnessInfo.currentNum=1,0===this.treatmentQueueInfoList.length)return this.currentUser.registerId="",this.currentUser.userName="",this.currentUser.staffName="",this.flag=!0,void this.$message({showClose:!0,duration:0,message:"今天的病人已看完，请注意休息",type:"success"});this.currentUser=this.treatmentQueueInfoList.shift()},getFormMessage:function(){this.userIllnessInfo.registerId=this.currentUser.registerId,this.userIllnessInfo.userId=this.currentUser.userId,this.userIllnessInfo.staffId=this.currentUser.staffId,this.userIllnessInfo.totalPrice=this.totalPrice}},computed:{totalPrice:function(){var e=0;return this.userIllnessInfo.medicList.forEach((function(t){e+=t.medicPrice*t.medicNum})),e}}},l=a,o=s("2877"),c=Object(o["a"])(l,r,n,!1,null,"384b27f2",null);t["default"]=c.exports},"65f0":function(e,t,s){var r=s("861d"),n=s("e8b5"),i=s("b622"),a=i("species");e.exports=function(e,t){var s;return n(e)&&(s=e.constructor,"function"!=typeof s||s!==Array&&!n(s.prototype)?r(s)&&(s=s[a],null===s&&(s=void 0)):s=void 0),new(void 0===s?Array:s)(0===t?0:t)}},"7db0":function(e,t,s){"use strict";var r=s("23e7"),n=s("b727").find,i=s("44d2"),a=s("ae40"),l="find",o=!0,c=a(l);l in[]&&Array(1)[l]((function(){o=!1})),r({target:"Array",proto:!0,forced:o||!c},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),i(l)},8418:function(e,t,s){"use strict";var r=s("c04e"),n=s("9bf2"),i=s("5c6c");e.exports=function(e,t,s){var a=r(t);a in e?n.f(e,a,i(0,s)):e[a]=s}},a434:function(e,t,s){"use strict";var r=s("23e7"),n=s("23cb"),i=s("a691"),a=s("50c4"),l=s("7b0b"),o=s("65f0"),c=s("8418"),u=s("1dde"),f=s("ae40"),d=u("splice"),m=f("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,I=Math.min,p=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!m},{splice:function(e,t){var s,r,u,f,d,m,b=l(this),v=a(b.length),y=n(e,v),L=arguments.length;if(0===L?s=r=0:1===L?(s=0,r=v-y):(s=L-2,r=I(h(i(t),0),v-y)),v+s-r>p)throw TypeError(g);for(u=o(b,r),f=0;f<r;f++)d=y+f,d in b&&c(u,f,b[d]);if(u.length=r,s<r){for(f=y;f<v-r;f++)d=f+r,m=f+s,d in b?b[m]=b[d]:delete b[m];for(f=v;f>v-r+s;f--)delete b[f-1]}else if(s>r)for(f=v-r;f>y;f--)d=f+r-1,m=f+s-1,d in b?b[m]=b[d]:delete b[m];for(f=0;f<s;f++)b[f+y]=arguments[f+2];return b.length=v-r+s,u}})},a640:function(e,t,s){"use strict";var r=s("d039");e.exports=function(e,t){var s=[][e];return!!s&&r((function(){s.call(null,t||function(){throw 1},1)}))}},ae40:function(e,t,s){var r=s("83ab"),n=s("d039"),i=s("5135"),a=Object.defineProperty,l={},o=function(e){throw e};e.exports=function(e,t){if(i(l,e))return l[e];t||(t={});var s=[][e],c=!!i(t,"ACCESSORS")&&t.ACCESSORS,u=i(t,0)?t[0]:o,f=i(t,1)?t[1]:void 0;return l[e]=!!s&&!n((function(){if(c&&!r)return!0;var e={length:-1};c?a(e,1,{enumerable:!0,get:o}):e[1]=1,s.call(e,u,f)}))}},b727:function(e,t,s){var r=s("0366"),n=s("44ad"),i=s("7b0b"),a=s("50c4"),l=s("65f0"),o=[].push,c=function(e){var t=1==e,s=2==e,c=3==e,u=4==e,f=6==e,d=5==e||f;return function(m,h,I,p){for(var g,b,v=i(m),y=n(v),L=r(h,I,3),x=a(y.length),N=0,S=p||l,M=t?S(m,x):s?S(m,0):void 0;x>N;N++)if((d||N in y)&&(g=y[N],b=L(g,N,v),e))if(t)M[N]=b;else if(b)switch(e){case 3:return!0;case 5:return g;case 6:return N;case 2:o.call(M,g)}else if(u)return!1;return f?-1:c||u?u:M}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},e8b5:function(e,t,s){var r=s("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-cdd383f8.fb097f52.js.map